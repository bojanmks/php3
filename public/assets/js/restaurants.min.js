$(document).ready(()=>{async function c(a=1){var b=$("#tbName").val().trim(),d=$("#ddlSort").val();let f=[];for(let g of $(".food-category.active"))f.push($(g).data("id"));$(".restaurantDiv").removeClass("shadow");$(".loader").fadeIn("fast");a=await ajaxCallback(base_url+"/restaurants/filter","POST",{keyword:b,sortOrder:d,categories:f,page:a});$(".loader").fadeOut("fast");if(a.views.length){b="";for(var e of a.views)b+=e;$("#restaurantsWrapper").html(b)}else $("#restaurantsWrapper").html("<span class='no-results col-12 font-medium'>No restaurants match your search criteria.</span>");
e=a.restaurants.current_page;a=a.restaurants.last_page;b=`<ul class='pagination font-small'><li class='page-item ${1===e?"disabled":""}'><a href='#' class='page-link pagination-back'><i class='fas fa-caret-left'></i></a></li>`;for(d=0;d<a;d++)b+=`<li class="page-item ${d+1===e?"active":""}"><a href='#' class="page-link number-link" data-page='${d+1}'>${d+1}</a></li>`;b+=`<li class='page-item ${e===a?"disabled":""}'><a href='#' class='page-link pagination-next'><i class='fas fa-caret-right'></i></a></li></ul>`;
$("#restaurantsPagination").html(b);h()}function h(){$(".pagination a").click(function(a){a.preventDefault()});$(".page-link.number-link").click(function(){const a=$(".page-item.active .page-link").data("page"),b=$(this).data("page");b!==a&&c(b)});$(".pagination-back").click(function(){const a=$(".page-item.active .page-link").data("page");1>=a||c(a-1)});$(".pagination-next").click(function(){const a=$(".page-item.active .page-link").data("page"),b=$(".page-link").length-2;a>=b||c(parseInt(a)+1)})}
c();$("#allCategories").click(function(a){a.preventDefault();$(".food-category").removeClass("active");$(this).addClass("active");c()});$(".food-category").click(function(a){a.preventDefault();$("#allCategories").removeClass("active");$(this).hasClass("active")?($(this).removeClass("active"),$(".food-category.active").length||$("#allCategories").addClass("active")):$(this).addClass("active");c()});$("#tbName").on("input",()=>{c()});$("#ddlSort").on("change",()=>{c()})});
